---
import { exec } from "child_process";
import { Hint } from "@/components/ui/hint";

let commitHash = import.meta.env.CF_PAGES_COMMIT_SHA;

if (import.meta.env.MODE === "development") {
	commitHash = "develop";
} else if (!commitHash) {
	commitHash = await new Promise((resolve, reject) => {
		exec("git rev-parse HEAD", (err, stdout) => {
			if (err) {
				reject(err);
			} else {
				resolve(stdout);
			}
		});
	});
}

commitHash = commitHash.slice(0, 7);
---

<Hint>
	Version: <code class="bg-muted text-muted-foreground">{commitHash}</code>
</Hint>
