---
import Layout from "@/layouts/Layout.astro"
import { Container } from "@/components/ui/container";
import { Stack } from "@/components/ui/stack";
import { DoubleArrowDownIcon, FrameIcon, GlobeIcon, LockOpen2Icon, MagicWandIcon, RocketIcon, SymbolIcon } from "@radix-ui/react-icons";
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
import Contributors from "@/components/Contributors.astro";
import Tiers from "@/components/Tiers.astro";
import ProjectList from "@/components/ProjectList.astro";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";
import Partnerships from "@/components/Partnerships.astro";
import Specials from "@/components/Specials.astro";
import { getCollection } from "astro:content";

const countProjects = await getCollection("projects").then((projects) => projects.length);
---


<Layout 
	title="Welcome"
	navbar={{
		buttons: [
			{
				text: "Updates",
				href: "/updates",
			},
			{
				text: "Verify diploma",
				href: "/verify",
				"data-astro-reload": true
			},
			{
				text: "Docs",
				href: "https://docs.roseto.space",
				target: "_blank"
			}
		]
	}}
>
	
	<Container>
		<Stack className="relative h-[80vh] justify-center items-center">
			<img 
				src="/static/shapes/rectangles.svg" 
				alt=""
				class="absolute left-0 h-full dark:mix-blend-overlay mix-blend-multiply pointer-events-none"
			/>
			<h1 class="text-6xl md:text-9xl font-black">
				<span
					class="bg-clip-text text-primary"
				>
					Growing
				</span> is a necessity, not an option.
			</h1>

			<p class="text-2xl font-bold w-full text-muted-foreground">
				The self-improvement space you need.
			</p>
			<div
				class="absolute bottom-0 opacity-50 flex flex-col items-center justify-center"
			>
				<DoubleArrowDownIcon className="animate-bounce" />
				<p
					class="text-sm font-bold"
				>Sounds good? Scroll down.</p>
			</div>
		</Stack>
	</Container>


	<Container>
		<Stack className="mt-32">
			<h2
				class="text-4xl font-bold"
			>
				What happened to Profiteri (Ciorogarla Unita)?
			</h2>
			
			<Card>
				<CardContent className="mt-6">
					<p>
						We decided to invest more time and effort into Profiteri (Ciorogarla Unita) and make it more
						than just a collective of people. We want to make it a community, a network of people that
						share the same values and beliefs.
					</p>
				</CardContent>
			</Card>
		</Stack>
	</Container>

	<img 
		src="/static/shapes/wave-secondary.svg" 
		alt=""
		class="w-full h-32 -mb-px pointer-events-none"
	/>
	<div
		class="bg-secondary"
	>
		<Container className="relative">
			<img 
				src="/static/shapes/clover.svg" 
				alt=""
				class="absolute bottom-1 right-1 opacity-50 h-72 w-72 pointer-events-none"
			/>
			<h2
				class="text-6xl font-bold text-secondary-foreground py-8"
			>
				Projects
			</h2>
			<ProjectList />
			<a href="/projects">
				<Button className="w-full mb-4 text-secondary-foreground border-black">
					See all {countProjects} projects
				</Button>
			</a>
		</Container>
	</div>
	<img 
		src="/static/shapes/wave-secondary.svg" 
		alt=""
		class="w-full h-32 rotate-180 -mt-px pointer-events-none"
	/>

	<Container>
		<Stack className="mt-8">
			<div
				class="grid grid-cols-1 md:grid-cols-2 gap-2"
			>
				<Partnerships />
				<Specials />
			</div>

			<h2
				class="text-6xl font-bold mt-4"
			>
				Why <span class="text-primary">Roseto</span>?
			</h2>
			<div class="grid grid-cols-2 gap-2 justify-center relative">
				<div class="flex flex-col text-center items-center mt-8">
					<FrameIcon
						className="w-20 h-20 hover:scale-110 hover:text-primary transition-all duration-300 ease-in-out"
					/>
					<CardTitle className="mt-2 text-2xl">
						Solid foundation
					</CardTitle>
					<CardDescription>
						We are built on privacy, security, freedom, sustainability, development, and community.
					</CardDescription>
				</div>

				<div class="flex flex-col text-center items-center mt-8">
					<LockOpen2Icon
						className="w-20 h-20 hover:scale-110 hover:text-primary transition-all duration-300 ease-in-out"
					/>
					<CardTitle className="mt-2 text-2xl">
						Open
					</CardTitle>
					<CardDescription>
						We are as open as possible. From our code, to the money we make, to our plans.
					</CardDescription>
				</div>

				<div class="flex flex-col text-center items-center mt-8">
					<GlobeIcon
						className="w-20 h-20 hover:scale-110 hover:text-primary transition-all duration-300 ease-in-out"
					/>
					<CardTitle className="mt-2 text-2xl">
						Everwhere
					</CardTitle>
					<CardDescription>
						While we are based in Romania, we are doing our best to extend our reach to the entire world.
					</CardDescription>
				</div>

				<div class="flex flex-col text-center items-center mt-8">
					<RocketIcon
						className="w-20 h-20 hover:scale-110 hover:text-primary transition-all duration-300 ease-in-out"
					/>
					<CardTitle className="mt-2 text-2xl">
						Forward-thinking
					</CardTitle>
					<CardDescription>
						We are always looking for new ways to improve our services and the way we do things.
					</CardDescription>
				</div>

				<img 
					src="/static/shapes/blobs.svg" 
					alt=""
					class="absolute left-0 bottom-0 w-64 md:w-full max-w-md h-64 dark:mix-blend-overlay mix-blend-multiply opacity-50 pointer-events-none"
				/>
			</div>

		</Stack>
	</Container>

	<Tiers />

	<Container className="mt-8">
		<Card className="flex flex-row items-center bg-gradient-to-tr from-secondary/25 via-transparent">
			<SymbolIcon
				className="w-28 h-28 p-6 pr-0"
			/>
			<div>
				<CardHeader>
					<CardTitle>
						Updates
					</CardTitle>
					<CardDescription>
						We are always working on something new. Check out our updates to see what we are up to.
					</CardDescription>
				</CardHeader>
				<CardFooter>
					<a href="/updates">
						<Button variant="secondary">
							See updates
						</Button>
					</a>
				</CardFooter>
			</div>
		</Card>
	</Container>

	<img 
		src="/static/shapes/wave.svg" 
		alt=""
		class="w-full h-32 mt-4 -mb-px pointer-events-none"
	/>
	<div class="bg-gradient-to-b from-primary to-secondary">
		<Container>
			<Stack className="relative">
				<div
					class="sticky top-4 z-40 mx-auto p-2 border border-muted rounded bg-background w-full max-w-screen-sm"
				>
					<h2
						class="text-3xl md:text-5xl font-bold text-center mb-1"
					>
						<span class="text-primary">Roseto</span>'s Mission
					</h2>
					<Progress 
						id="mission-progress"
					/>
				</div>
	
				<Card id="mission-card-1" className="mt-2">
					<CardContent className="flex flex-col text-center items-center mt-8">
						<img src="/static/engineering_team.svg" alt="Engineering Team" class="w-full h-64 mb-4" />
						<CardDescription className="text-xl">
							Build and maintain open-source software, tools, and services that help people and businesses.
						</CardDescription>
					</CardContent>
				</Card>
	
				<Card id="mission-card-2">
					<CardContent className="flex flex-col text-center items-center mt-8">
						<img src="/static/community.svg" alt="Community" class="w-full h-64 mb-4" />
						<CardDescription className="text-xl">
							Build a community of people that share the same values and beliefs.
						</CardDescription>
					</CardContent>
				</Card>
	
				<Card id="mission-card-3">
					<CardContent className="flex flex-col text-center items-center mt-8">
						<img src="/static/group_selfie.svg" alt="Group Selfie" class="w-full h-64 mb-4" />
						<CardDescription className="text-xl">
							Help young people develop their skills and find their passion,
							volunteer and help the community while having fun.
						</CardDescription>
					</CardContent>
				</Card>
	
				<Card id="mission-card-4">
					<CardContent className="flex flex-col text-center items-center mt-8">
						<img src="/static/business_deal.svg" alt="Business Deal" class="w-full h-64 mb-4" />
						<CardDescription className="text-xl">
							Help businesses and organizations with their digital transformation and development.
						</CardDescription>
					</CardContent>
				</Card>
	
				<Card id="mission-card-5" className="mb-24">
					<CardContent className="flex flex-col text-center items-center mt-8">
						<img src="/static/group_hangout.svg" alt="Group Hangout" class="w-full h-64 mb-4" />
						<CardDescription className="text-xl">
							Connect people together and help them grow and develop their skills.
						</CardDescription>
					</CardContent>
				</Card>
			</Stack>
			<h2
				class="text-4xl font-bold text-center mt-4 text-secondary-foreground"
			>
				And we are not stopping here.
			</h2>
	
		</Container>
	</div>
	<img 
		src="/static/shapes/wave-secondary.svg" 
		alt=""
		class="w-full h-32 mb-4 rotate-180 -mt-px pointer-events-none"
	/>

	<Container>
		<Stack>
			<div class="mt-4">
				<CardHeader>
					<CardTitle>
						This is how transparent we are
					</CardTitle>
				</CardHeader>
				<CardContent>
					<ul
						class="list-disc list-inside text-primary"
					>
						<li><a class="hover:underline" href="https://opencollective.com/roseto">Our budget</a></li>
						<li><a class="hover:underline" href="https://docs.roseto.space/info">Everything about us</a></li>
						<li><a class="hover:underline" href="https://docs.roseto.space/project-specs">Project specifications</a></li>
						<li><a class="hover:underline" href="https://github.com/roseto">Our source code</a></li>
						<li><a class="hover:underline" href="https://roseto.space/license">Our license</a></li>
					</ul>
				</CardContent>
			</div>

			<Contributors />

			<!--
			<h2
				class="text-4xl font-bold text-center mt-8"
			>
				<span class="bg-clip-text text-transparent bg-gradient-to-b from-primary to-secondary">Where</span> is Roseto?
			</h2>
			<p
				class="text-center"
			>
				Everywhere. This way you can access Roseto from anywhere pretty fast.
			</p>

			<img 
				src="/static/global-network.svg"
				alt="Cloudflare Workers"
				class="w-full"
			/>
			-->

			<Card>
				<CardHeader>
					<CardTitle>
						About
					</CardTitle>
					<CardDescription>
						Roseto is a dynamic and forward-thinking group committed
						to empowering the youth while fostering the digital transformation 
						of local communities and businesses. With a passion for innovation
						and community development, we strive to bridge the gap between
						technology and local needs, ensuring that the younger generation
						has the tools and opportunities they need to thrive in today's
						digital age. Join us in our mission to create a brighter, more
						connected future for all.
					</CardDescription>
				</CardHeader>
			</Card>
		</Stack>
	</Container>
</Layout>

<script is:inline>
	var missions = document.querySelectorAll("[id^=mission-card-]");

	// See how many steps we have
	var steps = missions.length;

	var missionTops = Array.from(missions).map((mission) => {
		return mission.getBoundingClientRect().top;
	});

	document.addEventListener("scroll", () => {
		const missionProgress = document.querySelector("#mission-progress > div");
		if (!missionProgress) return;

		// Get the current scroll position
		const scrollPosition = window.scrollY;

		// Get the current mission
		const currentMission = missionTops.findIndex((top) => {
			return top > scrollPosition;
		});

		// Get the current progress
		const currentProgress = (currentMission / steps) * 100;

		// Using Math, make 100 - currentProgress and make sure we don't go above 95%
		const calculatedProgress = 100 - currentProgress > 100 ? 5 : 100 - currentProgress;

		// Update the progress bar
		missionProgress.style.transform = `translateX(-${calculatedProgress}%)`;
	});
</script>